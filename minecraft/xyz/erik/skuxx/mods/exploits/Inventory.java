package xyz.erik.skuxx.mods.exploits;

import net.minecraft.client.gui.inventory.GuiContainer;
import net.minecraft.client.gui.inventory.GuiInventory;
import net.minecraft.network.play.client.C0DPacketCloseWindow;
import org.lwjgl.input.Keyboard;
import xyz.erik.api.config.vals.Bool;
import xyz.erik.api.mod.Mod;
import xyz.erik.skuxx.event.Event;
import xyz.erik.skuxx.event.EventTarget;
import xyz.erik.skuxx.event.events.EventMotion;
import xyz.erik.skuxx.event.events.EventPacket;
import xyz.erik.skuxx.mods.Category;

public class Inventory
extends Mod{
    public Bool carry = new Bool("Carry",false);
    public Inventory() {
        addSet(carry);

        setCategory(Category.EXPLOITS);
    }


    @EventTarget
    private void onPacketSend(EventPacket event){
        if (event.getType() != EventPacket.Type.SEND) return;
        if (event.getPacket() instanceof C0DPacketCloseWindow && carry.isState()) {
            final C0DPacketCloseWindow packet = (C0DPacketCloseWindow)event.getPacket();
            event.setCancelled(packet.windowId == 0);
        }
    }

    @EventTarget
    private void onMotion(EventMotion event) {
        if (event.getMotion() == Event.Motion.BEFORE) {
            if (getMinecraft().currentScreen instanceof GuiContainer || getMinecraft().currentScreen instanceof GuiInventory) {

                if (Keyboard.isKeyDown(Keyboard.KEY_UP)) {
                    getPlayer().rotationPitch -= 4;
                }
                if (Keyboard.isKeyDown(Keyboard.KEY_DOWN)) {
                    getPlayer().rotationPitch += 4;
                }

                if (Keyboard.isKeyDown(Keyboard.KEY_RIGHT)){
                    getPlayer().rotationYaw += 5;
                }
                if (Keyboard.isKeyDown(Keyboard.KEY_LEFT)) {
                    getPlayer().rotationYaw -= 5;
                }
            }
        }
    }

}
