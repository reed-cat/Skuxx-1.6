package xyz.erik.skuxx.mods.exploits;

import net.minecraft.network.play.client.C0BPacketEntityAction;
import xyz.erik.api.config.vals.Double;
import xyz.erik.api.helpers.ErikTimer;
import xyz.erik.api.helpers.Helper;
import xyz.erik.api.mod.Mod;
import xyz.erik.skuxx.event.Event;
import xyz.erik.skuxx.event.EventTarget;
import xyz.erik.skuxx.event.events.EventMotion;
import xyz.erik.skuxx.mods.Category;

public class NCPFly
extends Mod
{

    private ErikTimer timer = new ErikTimer();
    public NCPFly() {
        setCategory(Category.EXPLOITS);
        addSet(boost);
    }
    private boolean next;

    private Double boost = new Double("Boost",3.8,0,10  );
    @EventTarget
    private void onEvent(EventMotion e) {
        if (e.getMotion() == Event.Motion.BEFORE) {


            if(getPlayer().onGround || !Helper.MovementInput()){
                getMinecraft().getTimer().timerSpeed = 1F;

                return;
            }
            double forward = getPlayer().movementInput.moveForward;
            float yaw = getPlayer().rotationYaw;
            if (forward != 0.0D)
            {
                if (forward > 0.0D) {
                    forward = 1.0D;
                } else if (forward < 0.0D) {
                    forward = -1.0D;
                }
            }
            else {
                forward = 0.0D;
            }
            getPlayer().motionX = (forward * 0.29706F * boost.getValue() * Math.cos(Math.toRadians(yaw + 90.0F)));
            getPlayer().motionZ = (forward * 0.29706F * boost.getValue() * Math.sin(Math.toRadians(yaw + 90.0F)));
            if (getPlayer().ticksExisted % 2 == 0  && timer.delay(400)) {
                getPlayer().distanceWalkedModified = -777;
                getPlayer().jump();
                getPlayer().tick--;
                timer
                        .reset();

            }

        }
    }
}
